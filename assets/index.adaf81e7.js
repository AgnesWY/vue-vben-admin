var T=Object.defineProperty;var w=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var L=(o,n,t)=>n in o?T(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,$=(o,n)=>{for(var t in n||(n={}))E.call(n,t)&&L(o,t,n[t]);if(w)for(var t of w(n))N.call(n,t)&&L(o,t,n[t]);return o};var j=(o,n)=>{var t={};for(var s in o)E.call(o,s)&&n.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&w)for(var s of w(o))n.indexOf(s)<0&&N.call(o,s)&&(t[s]=o[s]);return t};var y=(o,n,t)=>new Promise((s,F)=>{var m=i=>{try{c(t.next(i))}catch(a){F(a)}},g=i=>{try{c(t.throw(i))}catch(a){F(a)}},c=i=>i.done?s(i.value):Promise.resolve(i.value).then(m,g);c((t=t.apply(o,n)).next())});import U from"./FormRender.2bf309b6.js";import{aV as X,ah as D,am as Y,aL as Z,fu as O,a as x,v as I,f as P,fA as oo,ao as eo,a4 as B,au as to,k as no,aw as R,o as k,h as z,n as H,z as V,F as ro,az as so,j as io,ay as ao,aA as mo,aB as fo,aC as lo,ax as co}from"./index.8b3a4968.js";/* empty css              *//* empty css              */import{b as po}from"./index.796fea7a.js";import{F as J}from"./Form.d11d3df6.js";import{b as uo,f as q}from"./index.42103eed.js";import{R as W}from"./index.0b814ffd.js";import{C as Fo}from"./index.af9de7bc.js";import"./index.ac79ec34.js";import"./formItemConfig.c8cfb093.js";import"./componentMap.079bf000.js";import"./index.a3762bda.js";import"./Checkbox.26de6fc2.js";import"./index.a06bc880.js";import"./index.a1d7263c.js";import"./index.2733323c.js";import"./index.eb5de6d2.js";import"./index.176e8df6.js";import"./index.3ef24bca.js";import"./index.a225b2b9.js";import"./useFormItem.60526fb0.js";import"./RadioButtonGroup.78f375c5.js";import"./get.65293a51.js";import"./index.e1ac0531.js";import"./eagerComputed.0aea585a.js";import"./DeleteOutlined.e9646d67.js";import"./transButton.658088fd.js";import"./index.8669c25f.js";import"./useFlexGapSupport.3a18f63e.js";import"./index.07f15dab.js";import"./useWindowSizeFn.3c2870e0.js";import"./FullscreenOutlined.fe4103b7.js";import"./index.c4801fa0.js";import"./useRefs.0ab27155.js";import"./index.e94befe9.js";import"./index.2fecddc0.js";import"./isNumber.40be0bed.js";import"./uuid.2b29000c.js";import"./download.82e3ba47.js";import"./base64Conver.08b9f4ec.js";import"./index.524ad3cb.js";import"./index.a6891a14.js";import"./_baseIteratee.eb583cd4.js";import"./useFormDesignState.79dd1b0e.js";import"./Col.12dd1a8e.js";import"./useSize.57639950.js";function go(o){return typeof o=="function"?o:X}function G(o,n){return o&&po(o,go(n))}function ho(o,n,t,s){(()=>{const p=Z(),h=p==null?void 0:p.parent;!h||o.formConfig.schemas.forEach(d=>{G(d.componentProps,(v,e)=>{O(v)&&(d.componentProps[e]=v.bind(h))}),G(d.on,(v,e)=>{O(v)&&(d.componentProps[e]=v.bind(h))})})})();const{emit:m}=t,g=J.useForm,{resetFields:c,validate:i,clearValidate:a,validateField:C}=g(n,[]);return{validate:i,validateField:C,resetFields:c,clearValidate:a,submit:()=>y(this,null,function*(){var h,d;const p=D(Y(n.value));return m==null||m("submit",p),(d=(h=o.formConfig).submit)==null||d.call(h,p),p})}}function Co(o,n,t,s){const F=e=>uo(o.formConfig.schemas,r=>r.field===e),m=(e,r,f)=>{const l=F(e);l&&(l[r]=f)},g=(e,r,f)=>{const l=F(e);l!=null&&l.componentProps&&(["options","treeData"].includes(r)&&c(e,void 0),l.componentProps[r]=f)},c=(e,r)=>{var f;typeof e=="string"?(o.formModel[e]=r,(f=t.value)==null||f.validateField(e,r,[])):Object.keys(e).forEach(u=>{var M;o.formModel[u]=e[u],(M=t.value)==null||M.validateField(u,e[u],[])})},i=(e,r)=>{o.formConfig[e]=r},a=e=>D(o.formModel)[e],C=()=>y(this,null,function*(){return D(o.formModel)}),b=e=>{m(e,"hidden",!0)},p=e=>{typeof e=="string"?g(e,"disabled",!0):i("disabled",e!==!1)},h=e=>{m(e,"hidden",!1)},d={};return(e=>{q(e,r=>{q(e,f=>{var l;d[f.field]||(d[f.field]=new Set),((l=r.link)==null?void 0:l.includes(f.field))&&O(r.update)&&d[f.field].add(r)}),d[r.field].add(r)})})(o.formConfig.schemas),$({linkOn:d,setValue:c,getValue:a,hidden:b,show:h,set:m,get:F,setProps:g,getData:C,disable:p},s)}const vo=x({name:"VFormCreate",components:{FormRender:U,Form:J,Row:W},props:{fApi:{type:Object},formModel:{type:Object,default:()=>({})},formConfig:{type:Object,required:!0}},emits:["submit","change","update:fApi","update:formModel"],setup(o,n){const t=o.formConfig.layout=="vertical"?Fo:W,{emit:s}=n,F=I(null),m=P({get:()=>o.formModel,set:u=>s("update:formModel",u)}),g=P(()=>o.formConfig.schemas&&o.formConfig.schemas.filter(u=>u.hidden!==!0)),c=oo(o,"fApi",s),{submit:i,validate:a,clearValidate:C,resetFields:b,validateField:p}=ho(o,m,n),l=Co({formConfig:o.formConfig,formData:o.formModel},n,F,{submit:i,validate:a,validateField:p,resetFields:b,clearValidate:C}),{linkOn:h}=l,d=j(l,["linkOn"]);c.value=d;const v=u=>{var S;const{schema:M,value:K}=u,{field:Q}=no(M);(S=h[Q])==null||S.forEach(_=>{var A;(A=_.update)==null||A.call(_,K,_,c.value)})},e=P(()=>eo(o.formConfig,["disabled","labelWidth","schemas"])),r=()=>{i()};B("formModel",m);const f=(u,M)=>{m.value[u]=M};return B("setFormModelMethod",f),{eFormModel:F,submit:i,validate:a,validateField:p,resetFields:b,clearValidate:C,handleChange:v,formModelProps:e,handleSubmit:r,setFormModel:f,formModelNew:m,wrapperComp:t,noHiddenList:g}}}),Mo={class:"v-form-container"};function bo(o,n,t,s,F,m){const g=R("FormRender"),c=R("Row"),i=R("Form");return k(),z("div",Mo,[H(i,co({class:"v-form-model",ref:"eFormModel",model:o.formModel},o.formModelProps),{default:V(()=>[H(c,null,{default:V(()=>[(k(!0),z(ro,null,so(o.noHiddenList,(a,C)=>(k(),io(g,{key:C,schema:a,formConfig:o.formConfig,formData:o.formModelNew,onChange:o.handleChange,setFormModel:o.setFormModel,onSubmit:o.handleSubmit,onReset:o.resetFields},ao({_:2},[a&&a.componentProps?{name:"schema.componentProps!.slotName",fn:V(()=>[mo(o.$slots,a.componentProps.slotName,fo(lo({formModel:o.formModel,field:a.field,schema:a})),void 0,!0)]),key:"0"}:void 0]),1032,["schema","formConfig","formData","onChange","setFormModel","onSubmit","onReset"]))),128))]),_:3})]),_:3},16,["model"])])}var ge=to(vo,[["render",bo],["__scopeId","data-v-0905ebe6"]]);export{ge as default};
